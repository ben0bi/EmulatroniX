<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>EmulatroniX</title>
	<link rel="stylesheet" type="text/css" href="css/base.css">
</head>
<body>
	<div id="wrapper">
		<div id="pixiscreen"></div>
	</div>
	
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<script src="https://pixijs.download/v4.5.2/pixi.min.js"></script>
	<script src="http://cdn.rawgit.com/ben0bi/RUNPIXI.js/v0.6.4/RUNPIXI/RUNPIXI.js"></script>
	
	<!-- NEW for part 2.1 -->
	<script src="js/EmuGraphicsAdapter.js"></script>

	<!-- NEW for DEMO 1: Plasma -->
	<script src="js/Plasma.js"></script>
	
	<script>
		var emuGraphics = null;
		var plasmaEffect = null;

		function mainLoop() 
		{
			if(emuGraphics==null || plasmaEffect==null)
				return;
			plasmaEffect.update();
			emuGraphics.switchBuffers();
		}
		
		// NEW FOR Anpassungen: Screengr√∂sse.
		// Resize the emulator screen if the window resizes.
		RUNPIXI.instance.setResizeFunction(function() 
		{
			if(emuGraphics!=null)
				emuGraphics.resize();
		});
		// ENDOF NEW FOR Anpassungen.
				
		$(document).ready(function() 
		{
			var browserBackgroundColor = 0x111133;
			RUNPIXI.initialize('pixiscreen', mainLoop, "transparent"); //browserBackgroundColor);
			
			// NEW for part 2.1
			RUNPIXI.PIXELATED(); // use this for pixel perfect rendering.
			
			var emuWidth = 100;
			var emuHeight = 100;
			emuGraphics = new EmuGraphicsAdapter(emuWidth, emuHeight,0x000000,0x3333AA);

			plasmaEffect = new Plasma(emuGraphics);
			
			console.log("Ready.");
		});
	</script>
</body>
</html>
